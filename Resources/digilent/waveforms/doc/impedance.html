<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>Impedance Analyzer</title>
<link rel="stylesheet" href="style.css" type="text/css" media="all" /> 
</head>
<body>
<h1>Impedance Analyzer</h1>
<p>The Impedance Analyzer is used to analyze capacitive and inductive elements. It uses the WaveGen 1, Oscilloscope device instruments, and reference resistor.</p>
<p>When the instrument is started, the Scope and WaveGen are stopped and their status shows Busy. The Impedance Analyzer takes control over these instruments while running.</p>
<p>The analyzer circuit can be constructed in the following ways:<br>
<img src="images/impedance.connection.last.png"><img src="images/impedance.connection.first.png"><img src="images/impedance.connection.diff.png"><br>
The DUT (Device Under Test) stands for the inductive or capacitive load to be analyzed and Resistor is the reference resistor. The resistor value depends on the load value and frequency.</p>
<p>The approximate resistor needed for different loads are the following:
<table border="1">
<tr><th>Capacitance</th><th>Ref Resistor</th><th>Inductance</th></tr>
<tr><td align=right>100 pF</td><td align=right>1 M&#8486;</td><td align=right></td></tr>
<tr><td align=right>1 nF</td><td align=right>100 k&#8486;</td><td align=right></td></tr>
<tr><td align=right>10 nF</td><td align=right>10 k&#8486;</td><td align=right>1uH</td></tr>
<tr><td align=right>1 uF</td><td align=right>1 k&#8486;</td><td align=right>10 uH</td></tr>
<tr><td align=right>10 uF</td><td align=right>100 &#8486;</td><td align=right>100 uH</td></tr>
<tr><td align=right>100 uF</td><td align=right>10 &#8486;</td><td align=right>1 mH</td></tr>
</table>
</p>
<p>When using Analog Discovery Impedance Analyzer module, select "Adapter" in the interface, after the resistor field. The IA interface will take control over the power supplies and digital IOs to control the module to switch between the resistor values: 10R, 100R, 1k, 10k, 100k, 1M<br>
For more information visit: <a target="_blank" href="https://digilent.com/reference/add-ons/impedance-analyzer/start">Analog Discovery Impedance Analyzer</a>.</p>

<p>The Impedance Analyzer instrument can be used in <a href="#impedance.meter">Meter</a> and <a href="#impedance.analyzer">Analyzer</a> modes.

<p>&nbsp;</p>
<h2><a name="impedance.meter" id="impedance.meter"></a>
1. Meter</h2>
<p>In Meter mode, the frequency can be adjusted or the Auto option can be used to decide on measurement frequency.</p>
<p><img src="images/impedance.meter.png"></p>
<p>&nbsp;</p>


<h2><a name="impedance.analyzer" id="impedance.analyzer"></a>
2. Analyzer</h2>
<p>In Analyzer mode, the analysis is performed from start to stop frequency in the specified number of steps. For each step, the WaveGen channel is set to a constant frequency and the Oscilloscope performs an acquisition. Using the frequency transformation result from the index corresponding to the current frequency step, the magnitude and phase value is calculated. This data is further transformed to various impedance values.</p>
<p><img src="images/impedance.png"></p>
<p>&nbsp;</p>


<h2><a name="impedance.menu" id="impedance.menu"></a>
3. Menu</h2>
<p>See <a href="main.html#main.menus">Menu</a> in Common Interfaces.</p>
<p>&nbsp;</p>



<h2><a name="impedance.view" id="impedance.view"></a>
4. View</h2>
<p>The View menu and the toolbar opens the following views.</p>
<p><img src="images/impedance.views.png"></p>
<ul>
<li><b>Meter/Analyzer:</b> switches between the simple <a href="#impedance.meter">Meter</a> and <a href="#impedance.analyzer">Analyzer</a>.</li>
<li><b>Input:</b> opens/closes the Input gain showing the V<sub>DUT</sub>/V<sub>reference resistor</sub>.</li>
<li><b>Phase:</b> opens/closes the Phase view showing the &#920; phase angle and the Input phase, DUT input vs output. The <i>Phase</i> is positive when DUT input signal is ahead of the output, positive for inductive and negative to capacitive loads.</li>
<li><b>Voltage:</b> opens/closes the Voltage view showing the RMS, real and imaginary voltages on the DUT.</li>
<li><b>Current:</b> opens/closes the Current view showing the RMS, real and imaginary current thorugh the DUT.</li>
<li><b>Impedance:</b> opens/closes the Impedance view showing the Impedance (|Z|), Series Resistance (Rs), and Series Reactance (Xs).</li>
<li><b>Admittance:</b> opens/closes the Admittance view showing the Admittance (|Y|), Parallel Conductance (Gp), and Parallel Susceptance (Bp).</li>
<li><b>Inductance:</b> opens/closes the Inductance view showing the Series (Ls) and Parallel Inductance (Lp).</li>
<li><b>Capacitance:</b> opens/closes the Capacitance view showing the Series (Cs) and Parallel Capacitance (Cp).</li>
<li><b>Factor:</b> opens/closes the Factor view showing the Dissipation (D) and Quality (Q) factors.</li>
<li><b>Nyquist:</b> opens/closes the Nyquist plot showing the Xs/Rs, reactance vs resistance.<br>
<li><b>Custom1,2:</b> opens/closes the Custom plots showing the custom values.<br>
The following can be opened under the View menu:</li>
<li><b>Time:</b> opens/closes the Time view for debugging purposes.</li>
<li><b>Notes:</b> opens/closes <a href="main.html#main.notes">Notes</a> view.</li>
</ul>
See <a href="main.html#main.plots">Plots</a> in Common Interfaces.

<p>Impedance measurements:</p>
<table>
<tr><td></td><td>Series mode</td><td></td><td>Parallel mode</td></tr>
<tr><td></td><td><img src="images/impedance.series.png"></td><td></td><td><img src="images/impedance.parallel.png"></td></tr>
<tr><td>|Z|</td><td>Impedance</td><td>|Y|</td><td>Admittance</td></tr>
<tr><td></td><td>= &radic; (Rs<sup>2</sup> + Xs<sup>2</sup>)</td><td></td><td>= &radic; (Gp<sup>2</sup> + Bp<sup>2</sup>)</td></tr>
<tr><td>&Theta;</td><td>Phase</td><td>&Theta;</td><td>Phase</td></tr>
<tr><td></td><td>= tan<sup>-1</sup> (Xs / Rs)</td><td></td><td>= tan<sup>-1</sup> (Bp / Gp)</td></tr>
<tr><td>Rs</td><td>Series Resistance</td><td>Gp</td><td>Parallel Conductance</td></tr>
<tr><td></td><td></td><td></td><td>= Rs / (Rs<sup>2</sup> + Xs<sup>2</sup>)</td></tr>
<tr><td>Gs</td><td>Series Conductance</td><td>Rp</td><td>Parallel Resistance</td></tr>
<tr><td></td><td>= 1 / Rs</td><td></td><td>= 1 / Gp</td></tr>
<tr><td>Xs</td><td>Series Reactance</td><td>Bp</td><td>Parallel Susceptance</td></tr>
<tr><td></td><td>= &omega; &times; Ls</td><td></td><td>= -1 / (&omega; &times; Lp)</td></tr>
<tr><td></td><td>= -1 / (&omega; &times; Cs)</td><td></td><td>= &omega; &times; Cp</td></tr>
<tr><td></td><td></td><td></td><td>= - Xs / (Rs<sup>2</sup> + Xs<sup>2</sup>)</td></tr>
<tr><td>Bs</td><td>Series Susceptance</td><td>Xp</td><td>Parallel Reactance</td></tr>
<tr><td></td><td>= 1 / Xs</td><td></td><td>= 1 / Bp</td></tr>
<tr><td>Ls</td><td>Series Inductance</td><td>Lp</td><td>Parallel Inductance</td></tr>
<tr><td></td><td>= Xs / &omega; </td><td></td><td>= -1 / (&omega; &times; Bp)</td></tr>
<tr><td>Cs</td><td>Series Capacitance</td><td>Cp</td><td>Parallel Capacitance</td></tr>
<tr><td></td><td>= -1 / (&omega; &times; Xs)</td><td></td><td>= Bp / &omega; </td></tr>
<tr><td>D</td><td>Dissipation Factor</td><td>D</td><td>Dissipation Factor</td></tr>
<tr><td></td><td>= Rs / Xs</td><td></td><td>= Gp / Bp </td></tr>
<tr><td></td><td>= Rs / (&omega; &times; Ls) = 1 / (&omega; &times; Ls &times; Gs)</td><td></td><td>= &omega; &times; Lp &times; Gp = &omega; &times; Lp / Rp</td></tr>
<tr><td></td><td>= &omega; &times; Cs &times; Rs = &omega; &times; Cs / Gs</td><td></td><td>= Gp / (&omega; &times; Cp) = 1 / (&omega; &times; Cp &times; Rp)</td></tr>
<tr><td>Q</td><td>Quality Factor</td><td>Q</td><td>Quality Factor</td></tr>
<tr><td></td><td>= Xs / Rs</td><td></td><td>= Bp / Gp </td></tr>
<tr><td></td><td>= &omega; &times; Ls / Rs = &omega; &times; Ls &times; Gs</td><td></td><td>= 1 / (&omega; &times; Lp &times; Gp) = Bp / (&omega; &times; Lp)</td></tr>
<tr><td></td><td>= 1 / (&omega; &times; Cs &times; Rs) = Gs / (&omega; &times; Cs)</td><td></td><td>= &omega; Cp / Gp = &omega; &times; Cp &times; Rp</td></tr>
<tr> <td></td><td></td></tr>
<tr><td>&omega;</td><td>Angular Frequency</td><td></td><td></td></tr>
<tr><td></td><td>= 2 &times; &pi; &times; Frequency</td></tr>
</table>

<p>&nbsp;</p>

<h3><a name="impedance.quick" id="impedance.quick"></a>
4.1. Quick Measure</h3>
<p>See <a href="main.html#main.quick">Quick Measure</a> in Common Interfaces.<br>
Vertical measurement mode displays the trace value at the respective frequency position, first the current view value followed by the values from the other opened view.</p>
<p><img src="images/impedance.quick.png"></p>
<p>&nbsp;</p>


<h3><a name="impedance.cursors" id="impedance.cursors"></a>
4.2. Cursors</h3>
<p>See <a href="main.html#main.cursors">Cursors</a> in Common interfaces.<br>
It displays the trace value at the respective frequency position, first the current view value followed by the values from the other opened view.</p>
<p>&nbsp;</p>

<h2><a name="impedance.control" id="impedance.control"></a>
5. Control</h2>
<p>The control area lets you adjust the settings for the impedance analysis. <br>
</p>
<p><img src="images/impedance.control.png"></p>
<ul>
<li><b>Single</b> button: starts a single analysis.</li>
<li><b>Run/Stop</b> button: starts repeated analysis or stops.</li>
<li><b>Auto</b> button: enables/disables the auto adjustment of frequency in meter mode.</li>
<li><b>Frequency:</b> lets you specify the frequency in meter mode.</li>
<li><b>Start:</b> lets you specify the analysis start frequency.</li>
<li><b>Stop:</b> lets you specify the analysis stop frequency.</li>
<li><b>Steps:</b> lets you specify the number of frequency points used for the analysis.</li>
<li><b>/Decade:</b> lets you specify the number of steps per decade for logarithmic scale.</li>
<li><b>Order:</b> selects the measurement circuit between: "W1-C1-DUT-C2-R-GND", "W1-C1-R-C2-DUT-GND", "Adapter".</li>
<li><b>Mode:</b> lets you select control mode between:</li>
<ul>
<li><b>Amplitude:</b> lets you adjust the Wavegen amplitude.</li>
<li><b>Custom:</b> lets you use custom script to automatically adjust the amplitude and the resistor values.</li>
<li><b>Constant Voltage/Current:</b> lets you specify a DUT voltage/current that will try to reach at each step adjusting the amplitude.</li>
<li><b>CV/CC Resistor:</b> lets you specify a DUT voltage/current that will try to reach at each step adjusting the amplitude and also the resistor value. Available with <a href="startadia.html">Impedance Analyzer Adapter</a></li>
</ul>
<li><b>Amplitude:</b> lets you specify the amplitude of the stimulus signal.</li>
<li><b>Offset:</b> lets you specify the offset for the stimulus signal.</li>
<li><b>Resistor:</b> lets you select the reference resistor value.</li>
<li><b>Averaging:</b> specifies the averaging time for each step.</li>
</ul>
<p><img src="images/impedance.control2.png"><img src="images/impedance.control4.png"></p>
<ul>
<li><b>Scale:</b> selects between linear or logarithmic frequency sweep.</li>
<li><b>Average:</b> specifies the number captures to average in each step. In each step it will perform and show the result of at least the <i>average</i> number of captures or more if it manages in the specified <i>averaging</i> time.</li>
<li><b>ProbeRes/ProbeCap:</b> lets you specify the probe resistance and capacitance. Leave Auto option to use device specific values for: Analog Discovery 2 43pF/1.04M&#8486;, for Analog Discovery 45pF/1.041M&#8486;, for Electronics Explorer 22pF/1M&#8486;</li>
<li><b>Wavegen:</b> selects the WaveGen channel to use.</li>
<li><b>Amplification:</b> specifies the external amplification of the signal.</li>
<li><b>Settle:</b> specifies the settle time expressed in seconds. The acquisition is delayed this amount of time in each step after the frequency is changed. This option can be used to reduce the alteration effect of resonant circuits (for instance, a speaker).</li>
<li><b>Min Periods:</b> specifies the minimum number of generated sine periods to capture.</li>
<li><b>Samples:</b> specifies the number of samples in capture to take at each frequency step. The default is maximum at up to 32ki. Higher number improves the resolution and accuracy but it can slow down the measurement process.</li>
<li><b>Warning:</b> enables or disables the warnings. Ideally the reference resistor should be equal to the DUT impedance otherwise the measurements may gradually loose resolution or accuracy. The warning is shown when the ratio between these is above 25.</li>
<li>The further options allow configuration of each oscilloscope channel as follows: <a href="scope.html#scope.offset">Offset</a>, <a href="scope.html#scope.range">Range</a>, <a href="scope.html#scope.attenuation">Attenuation</a>, and  <a href="scope.html#scope.coupling">Coupling</a>.</li>
</ul>

<p>The compensation function eliminates the test fixture and cabling errors, improving the measurement accuracy.</p>
<p><img src="images/impedance.control3.png"><img src="images/impedance.compensate.png"></p>
<p>The compensation is important, especially for analysis at frequencies higher than 100kHz.
The exact resistor values can be specified in the second column. The open and short compensation can be enabled in the following columns first row and performed with the buttons.
</p>

<p>&nbsp;</p>


<h3><a name="impedance.trace" id="impedance.trace"></a><a name="impedance.reference" id="impedance.reference"></a>
6. Trace/Reference</h3>
The current analysis is performed in the Trace and this can be saved as Reference for comparison.<br>
The check-box shows or hides the respective trace in the plots.
<p><img src="images/impedance.trace.png"></p>
The trace options contains the following:
<ul>
<li><b>Color:</b> sets the trace waveform color.</li>
<li><b>Export:</b> opens export window with the respective trace data, see <a href="main.html#main.export">Export</a> in Common Interfaces.</li>
<li><b>Name:</b> specifies the trace name.</li>
<li><b>Update:</b> updates the Reference trace with the Trace.</li>
<li><b>Close:</b> removes the Reference trace.</li>
</ul>
<br>

<h2><a name="impedance.export" id="impedance.export">
</a>7. Export</h2>
<p>See <a href="main.html#main.export">Export</a> in Common Interfaces.</p>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>

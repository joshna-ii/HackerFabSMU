<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>Network Analyzer</title>
<link rel="stylesheet" href="style.css" type="text/css" media="all" /> 
</head>
<body>
<h1>Network Analyzer</h1>
<p>The Network Analyzer is used to analyze transfer functions (the ratio between an output function and an input function). The Bode plot shows the magnitude and phase of the expressed function versus frequency. See <a target="_blank" href="http://en.wikipedia.org/wiki/Bode_plot">Bode plot</a> for more information.</p>
<p>Typical usage of Network Analyzer: the WaveGen 1 output and Oscilloscope Channel 1 input of the device is connected to the filter input, while the Oscilloscope Channel 2 is connected to the filter output, as shown in the picture below.</p>
<p><img src="images/network.connection.png"></p>
<p>When the instrument is started, the Scope and WaveGen are stopped and their status shows Busy. The Network Analyzer takes control over these instruments while running.</p>
<p><img src="images/network.png"></p>
<p>The analysis is performed from start to stop frequency in the specified number of steps. For each step, the WaveGen channel is set to a constant frequency and the Oscilloscope performs an acquisition. Using the frequency transformation result from the index corresponding to the current frequency step, the magnitude and phase value is calculated. The phase values are always relative to Channel 1. The magnitude is expressed in decibels with the <em>20 * Log</em><sub><em>10</em></sub><em> (gain)</em> formula, where 1x gain equals 0 dB and 2 X gain equals <sup>~</sup>6 dB. The phase is plotted with the maximum and minimum value as the one specified for the Phase Offset +/- 180&deg; value.</p>
<p>With Channel set to none under WaveGen options, no WaveGen channel is controlled. The Oscilloscope acquisitions are expecting a custom or external frequency sweep signal. The current frequency step is determined by peak frequency component with a magnitude of at least half of the specified WaveGen Amplitude value.</p>
<p>Having the "Relative to Channel 1" selected under Magnitude settings, only Channel 1 shows for Vpeak and Vrms the real value, for Gain and dB relative to the specified Amplitude. The magnitude shown for the other channels is relative to the measurement of Channel 1.<br>
This is done to show the characteristics of the analyzed filter circuit, eliminating possible Wavegen signal attenuations at high frequencies or excitation signal current limitations.<br>
This features is also useful to analyze sections of multistage filter, by connecting Scope Channel 1 to an intermediate section.</p>
<p>&nbsp;</p>

<h2><a name="network.menu" id="network.menu"></a>
1. Menu</h2>
<p>See <a href="main.html#main.menus">Menu</a> in Common Interfaces.</p>
<br>

<h3><a name="network.menu.view" id="analyzer.menu.view"></a>
1.1. View</h3>
<p><img src="images/network.menu.view.png"></p>
<ul>
<li><b>Time:</b> opens/closes the <a href="#network.view.time">Time</a> view.</li>
<li><b>FFT:</b> opens/closes the <a href="#network.view.fft">FFT</a> view.</li>
<li><b>Nyquist:</b> opens/closes the <a href="#network.view.nyquist">Nyquist</a> view.</li>
<li><b>Nichols:</b> opens/closes the <a href="#network.view.nichols">Nichols</a> view.</li>
<li><b>Cursors:</b> opens/closes the <a href="#network.view.cursors">Cursors</a> view.</li>
<li><b>Notes:</b> opens/closes <a href="main.html#main.notes">Notes</a> view.</li>
</ul>
<p>&nbsp;</p>

<h2><a name="network.control" id="network.control"></a>
2. Control</h2>
<p>The control area lets you adjust the settings for the network analysis. <br>
</p>
<p><img src="images/network.control.png"><br><img src="images/network.control2.png"></p>
<ul>
<li><b>Single</b> button: starts a single analysis.</li>
<li><b>Run/Stop</b> button: starts repeated analysis or stops.</li>
<li><b>Start</b> lets you specify the start frequency.</li>
<li><b>Stop:</b> lets you specify the stop frequency.</li>
<li><b>Steps:</b> lets you specify the number of frequency steps used for the analysis.</li>
<li><b>Step:</b> lets you specify the step size in frequency for linear scale.</li>
<li><b>/Decade:</b> lets you specify the number of steps per decade for logarithmic scale.</li>
<li><b>Scale:</b> selects between linear or logarithmic frequency sweep.</li>
<li><b>Source:</b> selects the Wavegen channel to use. With the &quot;external&quot; option, an external or custom sweep generator can be used. In this case, the Network Analyzer detects the peak component between start and stop frequencies. With Differential the two Wavegen outputs of the device generate inverted (180&deg;) signals.</li>
<li><b>Mode:</b> lets you select the amplitude mode: constant amplitude, variable based on table or custom script.</li>
<li><b>Amplitude:</b> lets you specify the amplitude of the generated signal, the peak to peak is twice of amplitude. For Differential option half of the amplitude is set for both signals, the peak to peak difference is twice of amplitude.</li>
<li><b>Table:</b> opens an editor where you can enter frequency/amplitude thresholds.<br>
<img src="images/network.wavegen.table.png"></li>
<li><b>Custom:</b> opens an editor to enter custom script for amplitude based on frequency.<br>
<img src="images/network.wavegen.custom.png"></li>
<li><b>Offset:</b> lets you specify the offset for the generated signal.<br>
The Options drop-down contains the following:</li>
<ul>
<li><b>Amplification:</b> specifies the external amplification of the signal.</li>
<li><b>Settle:</b> specifies the settle time expressed in seconds. The acquisition is delayed this amount of time in each step after the frequency is changed. This option can be used to reduce the alteration effect of resonant circuits (for instance, a speaker).</li>
<li><b>Min Periods:</b> specifies the minimum number of generated sine periods to capture.</li>
<li><b>Average:</b> specifies the number captures to average in each step.</li>
<li><b>Averaging:</b> specifies the averaging time for each step. In each step it will perform and show the result of at least the <i>average</i> number of captures or more if it manages in the specified <i>averaging</i> time.</li>
<li><b>Avg Mode:</b> lets you select between <i>mag/phase</i>: average calculated in frequency domain on magnitude and phase, <i>coherent</i>: average of time domain captures, the Scope can trigger on any signal period and <i>coherents</i>: the Wavegen is periodically restarted on which the Scope triggers).</li>
<li><b>Cohere</b> and <b>Overlap</b> specifies the number of trials for magnitude square coherence measurement. With Overlap checked it performs 2Xnumber-1 trials. The result can be visualized in Custom One or Two plots with Coherence variable.</li>
<li><b>Window</b> and <b>Beta:</b> see <a href="spectrum.html#spectrum.traces">Spectrum Traces</a> options.
<li><b>Samples:</b> specifies the number of samples in capture to take at each frequency step. The default is maximum at up to 32ki. Higher number improves the resolution and accuracy but it can slow down the measurement process.</li>
<li><b>External Thr:</b> specifies minimal valid magnitude for the Ref channel when External Source is used.</li>
</ul>
<li>The circuit diagram shows the suggested setup.</li>
</ul>
<p>&nbsp;</p>


<h2><a name="network.channels" id="network.channels"></a>
3. Channels</h2>


<h3><a name="network.magnitude" id="network.magnitude"></a>
3.1. Magnitude</h3>
<p><img src="images/network.magnitude.png"><img src="images/network.magnitude2.png"></p>
<ul>
<li><b>Relative to Ref</b>: when checked, the magnitude shown for the other channels is relative to the measurement of Ref channel selected in Phase group.</li>
<li><b>Units:</b> selects between dB, gain, %, Vpeak, Vrms representation of magnitude on Bode plot.</li>
<li><b>Top:</b> lets you specify the top of the magnitude plot.</li>
<li><b>Bottom:</b> lets you specify the bottom of the magnitude plot.</li>
<li><b>Scale:</b> under the gear drop-down, lets you select linear or logarithmic scale.</li>
<li><b>Spectrum:</b> lets you enable and configure the spectrum analysis.</li>
<ul>
<li><b>Harmonics:</b> lets you select the number of harmonics to be considered for THD, like 10 sets up to 10th harmonic.</li>
<li><b>Alias:</b> lets you enable the calculation for aliased harmonics.</li>
<li><b>Show:</b> lets you select the traces to be displayed: THD+N, THD, HD2, HD3...</li>
</ul>
</ul>
<br>

<h3><a name="network.phase" id="network.phase"></a>
3.2. Phase</h3>
<p><img src="images/network.phase.png"><img src="images/network.phase2.png"></p>
<ul>
<li><b>Ref:</b> lets you select the reference channel to be used for phase measurement and magnitude.</li>
<li><b>Offset:</b> lets you specify the offset of the phase plot.</li>
<li><b>Range:</b> lets you specify the range of the phase plot.</li>
The gear tool contains the following:
<li><b>Units:</b> selects between Degree and Radian units.</li>
<li><b>Delay:</b> lets you compensate the fixed delay of the DUT, like DSP latency.</li>
</ul>
<br>

<h3><a name="network.custom" id="network.custom"></a>
3.3. Custom One/Two</h3>
<p>The custom plots lets you specify custom functions.</p>
<p><img src="images/network.custom.png"><img src="images/network.custom2.png"></p>
<ul>
<li><b>Top:</b> lets you specify the top of the custom plot.</li>
<li><b>Bottom:</b> lets you specify the bottom of the custom plot.</li>
<li><b>Function:</b> opens the function editor.</li>
</ul>
<br>
The gear tool contains the following:
<ul>
<li><b>Scale:</b> lets you select linear or logarithmic scale.</li>
<li><b>Units:</b> specifies the units for the plot.</li>
<li><b>Name:</b> specifies the plot name.</li>
</ul>
<br>
The custom functions is evaluated for each frequency step. It receives as input:
<ul>
<li><b>Freq:</b> step frequency in Hertz</li>
<li><b>Gain:</b> magnitude in gain relative to Amplitude or Channel 1</li>
<li><b>Phase:</b> relative to Channel 1 in radian</li>
<li><b>Real:</b> real part, gain x cos(phase)</li>
<li><b>Imag:</b> imaginary part, gain x sin(phase)</li>
<li><b>THDN:</b> total harmonic distortion in gain relative to carrier</li>
<li><b>THD:</b> total harmonic distortion in gain relative to carrier</li>
<li><b>HD#:</b> HD2, HD3,.... harmonic distortion in gain relative to carrier</li>
</ul>

<p><img src="images/network.custom.edit.png"></p>
<p>The provided examples (capacitor and inductor with series/parallel approximations) expect a reference resistor. The value of this is defined in the rRef constant. The rScope is the scope input resistance and cScope the capacitance.</p>
<p><img src="images/network.custom.conn.png"></p>
<p>10 nF capacitor with 2k&#8486; reference resistor:<br><img src="images/network.custom.cap.png"></p>
<p>15 uH inductor with 5&#8486; reference resistor:<br><img src="images/network.custom.ind.png"></p>
<br>

<h3><a name="network.channel.add" id="network.scope.channel.add"></a>
3.4. Add Channel</h3>
<p>Saves a channel as reference to compare with further analysis.</p>
<br>

<h3><a name="network.channel" id="network.channel"></a>
3.5. Channel</h3>
<p><img src="images/network.channel.png"><img src="images/network.channel2.png"></p>
<ul>
<li><b>Offset:</b> lets you specify the offset of the Scope channel.</li>
<li><b>Gain:</b> lets you specify the gain of the Scope channel relative to the WaveGen amplitude.</li>
</ul>
The gear tool contains the following:
<ul>
<li><b>Color:</b> sets the channel waveform color.</li>
<li><b>Attenuation:</b> specifies the used probe attenuation.</li>
<li><b>Range:</b> lets you specify the range of the Scope channel.</li>
<li><b>Export:</b> opens export window with the respective channel data, see <a href="main.html#main.export">Export</a> in Common Interfaces.</li>
<li><b>Name:</b> specifies the channel name.</li>
<li><b>Label:</b> specifies the channel label.</li>
</ul>
<br>

<h3><a name="network.reference" id="network.reference"></a>
3.6. Reference</h3>
<p><img src="images/network.reference.png"><img src="images/network.reference2.png"></p>
The Reference options contains the following:
<ul>
<li><b>Color:</b> sets the channel waveform color.</li>
<li><b>Update:</b> updates reference channel with the selected channel waveform.</li>
<li><b>Import:</b> opens import window for the respective channel.</li>
<li><b>Export:</b> opens export window with the respective channel data, see <a href="main.html#main.export">Export</a> in Common Interfaces.</li>
<li><b>Name:</b> specifies the channel name.</li>
<li><b>Label:</b> specifies the channel label.</li>
</ul>
<br>


<h2><a name="network.plot" id="network.plot"></a>
4. Bode Plot</h2>
<p>The Bode plot shows the magnitude and phase.</p>
<p>By default, the Channel 1 magnitude is relative to the WaveGen amplitude. The magnitude and phase values of the other channels are relative to channel 1.</p>
The gear tool (in the top-right corner or mouse right-click) contains options for:
<ul>
<li><b>Color:</b> selects the color theme for this plot.</li>
<li><b>Plot Width:</b> sets the thickness of the waveform, expressed as points.</li>
</ul>
<p><img src="images/network.plot.png"></p>
<p>&nbsp;</p>


<h3><a name="network.quick" id="network.quick"></a>
4.1 Quick Measure</h3>
<p>See <a href="main.html#main.quick">Quick Measure</a> in Common Interfaces.<br>
The corresponding position is marked with a cross on Nichols and Nyquist plots.</p>
<p>&nbsp;</p>


<h3><a name="network.cursors" id="network.cursors"></a>
4.2. Cursors</h3>
<p>See <a href="main.html#main.cursors">Cursors</a> in Common interfaces.</p>
<p>&nbsp;</p>

<h2><a name="network.views" id="network.views"></a>
5. Views</h2>

<h3><a name="network.view.time" id="network.view.time"></a>
5.1. Time</h3>
<p>The time plot shows the oscilloscope acquisition of the last frequency step. This view is used to help adjust the offset and gain of the oscilloscope input channels.</p>
<p><img src="images/network.view.time.png"></p>
<p>&nbsp;</p>

<h3><a name="network.view.fft" id="network.view.fft"></a>
5.2. FFT</h3>
<p>The FFT plot shows the spectrum of the last frequency step.</p>
<p><img src="images/network.view.fft.png"></p>
<p>&nbsp;</p>

<h3><a name="network.view.nyquist" id="network.view.nyquist"></a>
5.3. Nyquist</h3>
<p>The Nyquist plot is the magnitude and phase plotted in the polar coordinate system.<br>
The selected cursor or Quick Measure position is marked with cross on the plot.</p>
<p><img src="images/network.view.nyquist.png"></p>
<p>&nbsp;</p>

<h3><a name="network.view.nichols" id="network.view.nichols"></a>
5.4. Nichols</h3>
<p>The Nichol's plot is the magnitude and phase plotted in the Cartesian coordinate system.<br>
The selected cursor or Quick Measure position is marked with cross on the plot.</p>
<p><img src="images/network.view.nichols.png"></p>
<p>&nbsp;</p>

<h3><a name="network.view.cursors" id="spectrum.view.cursors"></a>
5.5. Cursors</h3>
<p>The Cursors show cursor information in table view. See <a href="scope.html#scope.cursors">Cursors</a> for more information.<br>
This table shows additional information to cursor tooltips: the <i>1 / delta x</i> frequency, <i>delta y</i> vertical difference, and <i>delta y / delta x</i>.</p>
<p><img src="images/network.view.cursors.png"></p>
<p>&nbsp;</p>

<h2><a name="network.export" id="network.export"></a>6. Export</h2>
<p>See <a href="main.html#main.export">Export</a> in Common Interfaces.</p>

<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
</body>
</html>

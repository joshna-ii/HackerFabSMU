<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
<title>
Spectrum Analyzer
</title>
<link rel="stylesheet" href="style.css" type="text/css" media="all" /> 
</head>
<body>
<h1>
Spectrum Analyzer
</h1>
<p>
The Spectrum Analyzer instrument measures the magnitude of an input signal versus its frequency.</p>
<p>The Spectrum Analyzer uses the oscilloscope channels to acquire input signals. Because of this, all instruments that use the oscilloscope channels will cease acquisition when the Spectrum Analyzer begins sampling.</p>
<p><img src="images/spectrum.png"></p>
<br>

<h2><a name="spectrum.menu" id="spectrum.menu"></a>
1. Menu</h2>
<p>See <a href="main.html#main.menus">Menu</a> in Common Interfaces.</p>

<h3><a name="spectrum.menu.view" id="spectrum.menu.view"></a>
1.1. View</h3>
<p><img src="images/spectrum.menu.view.png"></p>
<ul>
<li><b>Persistence:</b> opens/closes the <a href="#spectrum.view.persistence">Persistence</a> view.</li>
<li><b>Time:</b> opens/closes the <a href="#spectrum.view.time">Time</a> view.</li>
<li><b>Measurements:</b> opens/closes the <a href="#spectrum.view.measure">Measurements</a>.</li>
<li><b>Components:</b> opens/closes the <a href="#spectrum.view.components">Components</a>.</li>
<li><b>X,YCursors:</b> opens/closes the <a href="#spectrum.view.cursors">Cursors</a>.</li>
<li><b>Markers:</b> opens/closes the <a href="#spectrum.view.markers">Markers</a>.</li>
<li><b>Logging:</b> opens/closes the <a href="main.html#main.log">Logging</a>.</li>
<li><b>Notes:</b> opens/closes <a href="main.html#main.notes">Notes</a> view.</li>
</ul>
<p>&nbsp;</p>


<h2><a name="spectrum.control" id="spectrum.control"></a>
2. Control</h2>
<p><img src="images/spectrum.control.png"></p>
<p>The control toolbar only shows the important options by default. The down/up arrow in the top-right corner shows/hides the other features. This toolbar contains the following:</p>
<ul>
<li><b>Single </b>button: starts a single acquisition.</li>
<li><b>Run/Stop </b>button: starts repeated acquisition. While the acquisition is in progress, the Run button becomes the Stop button.
</li>
<li><img src="images/cog.png">
<ul> 
<li><b>Run:</b> selects the Run operation for repeated captures to be Continuous, Stop after specified Limit number of captures.</li>
<li><b>Device Buffering</b> available with ADP3X50. When checked, in Repeated mode the device will store multiple captures at low latency. The number of device buffers is shown in the top of the main time view, <i>DevBuf: used/total</i>. The maximum device buffers is Scope capture memory/ specified Time-Samples/ Enabled device channels.<br>
In this mode the latency between captures with ADP3X50 is less than 1us, between 0.2 and 0.54 us</li>
</ul></li><br>
<li><b>Freq. Range:</b> The frequency range options selects the operation range of the Spectrum Analyzer. Having the auto option selected, the maximum frequency or sampling rate is determined based on the stop or highest value between start and stop.</li>
<li><b>Scale:</b> Selects between Linear and Logarithmic frequency scale.</li>
<li><b>Center/Span</b> or <b>Start/Stop:</b> The frequency halfway between the stop and start frequencies is known as the <i>Center</i> frequency. This is the frequency that is in the middle of the display&#8217;s frequency axis. The Span parameter specifies the range between the start and stop frequencies. Alternatively, the Start and Stop frequencies can be specified.</li>
<li><b>BINs:</b> Adjusts the number of frequency bins.</li>
<li><b>Samples:</b> Adjusts the number of time domain and oscilloscope acquisition samples.</li>
<li><b>Resolution:</b> Adjusts the frequency resolution bandwidth.</li>
<li><b>Algorithm:</b>
<ul>
<li><b>FFT:</b> Fast Fourier Transform (quick process) expects a number of input samples (always a power of 2). It then outputs half of this number in frequency BINs, linear from 0 to half of the sampling frequency. </li>
<li><b>CZT:</b> Bluestein's Chirp-Z Transform expects an arbitrary number of input samples. It then outputs arbitrary number of frequency BINs, linear from the specified start to stop frequencies. This allows resolution to increase by interpolation. It allows smooth adjustment of resolution bandwidth with a flexible number of input samples and output BINs.</li>
</ul>
The gear drop-down contains the following options:
<li><b>Update:</b> This specifies the time period at which the application will check the oscilloscope device status and read the acquired data. Increase the time to reduce the update rate.</li>
</ul>
<p>&nbsp;</p>


<h2><a name="spectrum.traces" id="spectrum.traces"></a>
3. Traces</h2>

<h3><a name="spectrum.magnitude" id="spectrum.magnitude"></a>3.1. Magnitude</h3>
<p><img src="images/spectrum.magnitude.png"></p>
<ul>
<li><b>Units:</b> Selects the amplitude units:<ul>
<li><b>Peak (V):</b> Relative to 1V amplitude sine wave.</li>
<li><b>RMS (&#x1E7C;):</b> Relative to 1&#x1E7C; (1.41V sqrt(2) amplitude) sine wave.</li>
<li><b>&#x1E7C;/&radic;Hz (VHz):</b> is RMS value / square root (RBW). Resolution BandWidth = resolution x equivalent noise bandwidth of the window function.</li>
<li><b>Peak (dB):</b> dB reference to peak value.</li>
<li><b>RMS (dB):</b> dB reference to RMS value.</li>
<li><b>dB&#x1E7C;:</b> dB reference to 1&#x1E7C; sine wave, 20*Log<sub>10</sub>(&#x1E7C;).</li>
<li><b>dBu:</b> dB reference to 0.775&#x1E7C; sqrt(1.2) sine wave, 20*Log<sub>10</sub>(&#x1E7C;/0.775).</li>
<li><b>dBm:</b> dB reference to 0.224&#x1E7C; sqrt(0.1) sine wave, relative to 1mW on 50&#8486; load.</li>
<li><b>dBm/&radic;Hz:</b> dBm - 10*Log<sub>10</sub>(RBW/1Hz).</li>
<li><b>dBm/&radic;MHz:</b> dBm - 10*Log<sub>10</sub>(RBW/1MHz). </li>
<li><b>dBOV:</b> dB reference to full scale square wave, 20*Log<sub>10</sub>&#x1E7C;/VFSSquare).</li>
<li><b>dBFS:</b> dB reference to full scale sine wave, 20*Log<sub>10</sub>(&#x1E7C;/VFSSine).</li>
</ul>
</li>
<li><b>Top:</b> Adjusts the top amplitude level. The channel's input range with <i>Auto</i> option is configured according to this setting.</li>
<li><b>Bottom:</b> Adjusts the bottom amplitude level. </li>
<li><b>Reference:</b> Adjusts the peak voltage reference for dB unit selection.</li>
The gear drop-down contains the following options:
<li><b>Scale:</b> Selects between Linear and Logarithmic magnitude scale, available for voltage units.</li>
<li><b>Phase:</b> Selects between Off, Degree or Radian. The phase is displayed at cursor values and in export.</li>
</ul>
<p>&nbsp;</p>


<h3><a name="spectrum.channel" id="spectrum.channel"></a>3.2. Channel</h3>
<p>The options in the drop-down menu allow configuration of each oscilloscope channel as follows: <a href="scope.html#scope.offset">Offset</a>, <a href="scope.html#scope.range">Range</a>, <a href="scope.html#scope.attenuation">Attenuation</a>, <a href="scope.html#scope.samplemode">Sample Mode</a>, <a href="scope.html#scope.coupling">Coupling</a>, <a href="scope.html#scope.bandwidth">Bandwidth</a>, and <a href="scope.html#scope.impedance">Impedance</a>; and to configure <a href="scope.html#scope.trigger.source">trigger</a>. Having the Main option for Range, the range will be the Range value set above the Channel options.</p>
<p><img src="images/spectrum.channels.png"><img src="images/spectrum.trigger.png"></p>
<p>&nbsp;</p>


<h3><a name="spectrum.trace" id="spectrum.trace"></a>3.3. Trace</h3>
<p>The Add Trace drop-down menu contains:</p>
<ul>
<li><b>Add Normal Trace:</b> This adds a trance with default or its last settings.</li>
<li><b>Reference:</b> This allows cloning an existing trace settings and data with <i>Hold</i> option, to be used as reference trace.</li>
</ul>

<p><img src="images/spectrum.trace.png"><img src="images/spectrum.trace2.png"></p>
<p>Up to eight traces can be added. For each trace, the following options can be individually configured:</p>
<ul>
<li><b>Channel:</b> The channel option selects the input of the trace, one of the oscilloscope inputs of the connected device, or Hold keeps the trace unchanged/unaffected by the new sweeps.</li>
<li><b>Type:</b> Selects one of the following:
<ul>
<li><b>Sample:</b> The trace is updated after each sweep.</li>
<li><b>Peak Hold Cont.:</b> Continuous peak hold, keeps the maximum values for each bin from consecutive sweeps.</li>
<li><b>Peak Hold:</b> The trace is updated with peak values after the specified count of sweeps.</li>
<li><b>Min Hold Cont.:</b> Continuously keeps the minimum amplitude values for each bin from consecutive sweeps.</li>
<li><b>Min Hold:</b> The trace is updated with minimum values after the specified count of sweeps.</li>
<li><b>Linear RMS Average:</b> The trace is updated after the specified count of sweeps with linear average of <i>Vrms</i> amplitudes.</li>
<li><b>Linear dB Average:</b> The trace is updated after the specified count of sweeps with linear average of dB amplitudes.</li>
<li><b>Exp. RMS Average:</b> Performs exponential averaging of <i>Vrms</i> amplitudes. It is calculated using the following formula: 
<br>Average<sub>i</sub> = Rrms(Sweep)/Weight + Rms (Average)<sub>(i-1)</sub>*(Weight -1)/Weight&nbsp; </li>
<li><b>Exp. dB Average:</b> Performs exponential averaging of Vrms amplitudes. It is calculated using the following formula: 
<br>Average<sub>i</sub> = dB(Sweep)/Weight&nbsp; + dB (Average)<sub>(i-1)</sub>*(Weight -1)/Weight </li>
</ul>
</li>
<li><b>Count/Weight:</b> Specifies the count or weight for the selected averaging methods.</li>
</ul>
<p>The options drop-down contains the following settings:</p>
<ul>
<li><b>Color:</b> sets the channel waveform color.</li>
<li><a name="spectrum.window" id="spectrum.window"></a><b>Window:</b> Selects the window function:
<ul>
<li><b>Rectangular:</b> Good for closely spaced sine waves and white noise analysis.</li>
<li><b>Triangular:</b> W<sub>X</sub> = (2/(N+1) *((N+1)/2 - abs(X - (N-1)/2))</li>
<li><b>Hamming:</b> W<sub>X</sub> = 0.54 - 0.46*cos(2*&pi;*X/(N-1))<br>
Good for closely spaced sine waves.</li>
<li><b>Hann</b>(ing): W<sub>X</sub> = 0.5 - 0.5*cos(2*&pi;*X/(N-1))<br>
Good for unknown content, narrowband, and combination of sine waves.</li>
<li><b>Cosine:</b> W<sub>X</sub> = sin(&pi;*X/(N-1))</li>
<li><b>Blackman-Harris:</b> W<sub>X</sub> = 0.35875-0.48829*cos(2* &pi;*X/(N-1))+0.14128*cos(4*&pi;*X/(N-1))-0.01168*cos(6*&pi;*X/(N-1))</li>
<li><b>Flat Top:</b> W<sub>X</sub> = 1 - 1.93*cos(2*&pi;*X/(N-1)) + 1.29*cos(4*&pi;*X/(N-1)) - 0.388*cos(6*&pi;*X/(N-1)) + 0.028*cos(8*&pi;*X/(N-1))<br>
Reduces resolution but is good in amplitude accuracy.</li>
<li><b>Kaiser:</b> W<sub>X</sub> = bessel_i0(beta * sqrt(1 - ((2*X - (N-1)) / n(N-1)m))^2)</li>
<li><b>Blackman:</b> W<sub>X</sub> = 0.42 - 0.5*cos(2*&pi;*X/(N-1)) + 0.08*cos(4*&pi;*X/(N-1))</li>
<li><b>Flat TopM:</b> W<sub>X</sub> = 1 - 1.93*cos(2*&pi;*X/(N-1)) + 1.29*cos(4*&pi;*X/(N-1)) - 0.388*cos(6*&pi;*X/(N-1)) + 0.0322*cos(8*&pi;*X/(N-1))<br>
See <a href="http://en.wikipedia.org/wiki/Window_function"><em>Window Functions</em></a> for more information.</li>
</ul>
</li>
<li><b>Beta:</b> Adjusts the &pi;*&alpha; parameter of Kaiser window.</li>
<li><b>Import Samples:</b> Opens import dialog for time domain data samples.</li>
<li><b>Export Samples:</b> Opens export dialog of the trace channel time domain samples.</li>
<li><b>Export BINs:</b> Opens export window with the respective trace data. See <a href="main.html#main.export">Export</a> in Common Interfaces.</li>
<li><b>Name:</b> specifies the channel name.</li>
<li><b>Label:</b> specifies the channel label.</li>
</ul>
<p>&nbsp;</p>


<h2><a name="spectrum.plot" id="spectrum.plot"></a>
4. Plot</h2>
<p>The main spectrum plot shows the magnitude versus frequency. For more on frequency settings, see the <a href="#spectrum.control">Control</a> toolbar and <a href="#spectrum.magnitude">Magnitude</a> options.</p>
<p><img src="images/spectrum.plot.png"></p>
<p>See <a href="main.html#main.plots">Plots</a> in Common Interfaces.</p>
<p>&nbsp;</p>


<h3><a name="spectrum.quick" id="spectrum.quick"></a>
4.1 Quick Measure</h3>
<p>See <a href="main.html#main.quick">Quick Measure</a> in Common Interfaces.<br>
<ul>The Quick Measure can be used in the following two modes:
<li><b>Free:</b> Allows measuring the distance between two mouse clicks, expressed in frequency and difference. Also shows the vertical value and difference.</li>
<li><b>Vertical:</b> The vertical measurement is performed on signal values for each channel.<br>
Having the mouse cursor in the upper half of the plot, the Quick Measure will search and position at a nearby peak. In the lower half of the plot, it is not searching for peaks.</li>
</ul>
</p>
<p>&nbsp;</p>


<h3><a name="spectrum.cursors" id="spectrum.cursors"></a>
4.2. Cursors</h3>
<p>See <a href="main.html#main.cursors">Cursors</a> in Common interfaces.</p>
<p>&nbsp;</p>


<h2><a name="spectrum.views" id="spectrum.views"></a>
5. Views</h2>

<h3><a name="spectrum.view.persistence" id="spectrum.view.persistence"></a>
5.1. Persistence</h3>
<p>Persistence view superimposes multiple waveform acquisitions on the same view. The more frequent waveforms are drawn with hotter colors than rare ones. The view is cleared by the clear button,  after making any configuration change, or restarting repeated acquisition.</p>

<p><img src="images/spectrum.view.persistence.png"></p>
<p>&nbsp;</p>

<h3><a name="spectrum.view.time" id="spectrum.view.time"></a>
5.2. Time</h3>
<p>The time plot shows the last oscilloscope acquisition. This view is used to help adjust optimal offset and range for each channel.</p>
<p><img src="images/spectrum.view.time.png"></p>
<p>&nbsp;</p>


<h3><a name="spectrum.view.measure" id="spectrum.view.measure"></a>
5.3. Measurements</h3>
<p>The Measurements view shows the list of the selected measurements. The first column in the list shows the channel, the second shows the name, the third shows the measurement value, the fourth displays the frequency, and the fifth shows the alias frequency for components, along with some other measurements. At the top are Add, Remove, and Option drop-down buttons.</p>
<p>Pressing the Add button opens the Add Measurements window. On the left side is the channel list, and on the right side is a tree view containing the measurement types in groups. Pressing the Add button here (or double-clicking an item) will add it to the measurement list.</p>

<p><img src="images/spectrum.view.measure.png"></p>
<p>The measurement options:</p>
<ul>
<li><b>Harmonics:</b> Maximum number of harmonics to search for.</li>
<li><b>Alias:</b> Search for high frequency harmonics above analysis frequency limit, reflected by sampling frequency.</li>
<li><b>Excursion:</b> The minimum excursion level needed for a peak to be considered a valid fundamental frequency or harmonic.</li>
</ul>
<p>&nbsp;</p>

<h3>Constant</h3>
<ul>
<li><b>ENBW:</b> Normalized equivalent noise bandwidth of window function.</li>
<li><b>Resolution:</b> Resolution of bins, bin to bin distance.</li>
<li><b>RBW:</b> Resolution bandwidth is calculated from the transform resolution and window bandwidth.</li>
<li><b>FS:</b> Full scale is the input range, maximum magnitude of sine wave before clipping.</li>
<li><b>DNR:</b> Dynamic range is the ratio, in dB, of the largest to the smallest signals that can be detected.<br>
<img src="images/spectrum.measure.dnr.png">
</li>
<li><b>Bits:</b> AD Converter bits.</li>
<li><b>BINs:</b> Number of frequency bins, selectable from the frequency toolbar.</li>
<li><b>Samples:</b> Number of time domain acquisition samples, selectable from the frequency toolbar.</li>
</ul>
<p>&nbsp;</p>

<h3>Dynamic</h3>
<ul>
<li><b>NF:</b> Noise floor is a root mean square (RMS) of all the bins except: the DC, fundamental frequency, its harmonics and slopes of these.<br>
<img src="images/spectrum.measure.nf.png"></li>
<li><b>TN:</b> Total noise is a root sum squared of all the bins except: the DC, fundamental frequency, its harmonics and slopes of these<br>
<img src="images/spectrum.measure.tn.png"></li>
<li><b>WoSpur:</b> Worst spur level may or may not be a harmonic of the original signal; DC and bins on the descending slope are excluded.</li>
<li><b>SFDR:</b> Spurious free dynamic range is the ratio of the RMS value of the peak signal to the RMS value of the worst spurious signal. Expressed in dBc units, with respect to the actual signal amplitude.</li>
<li><b>SFDRFS:</b> Spurious free dynamic range, expressed in dBFS units, with respect to full-scale.</li>
<li><b>SNR:</b> <b>SNRp:</b> Signal to noise ratio:<br>
<img src="images/spectrum.measure.snr.png"> <img src="images/spectrum.measure.snrp.png"><br>Where <i>Vmrs<sub>i</sub></i> are all bins except peak signal, its harmonics, and DC. The exceptions are the descending slope bins of the earlier mentioned peaks.</li>
<li><b>SNRFS:</b> Signal to noise ratio, expressed in dBFS units, with respect to full-scale.</li>
<li><b>THD:</b> Total Harmonic Distortion, S/D<br>
<img src="images/spectrum.measure.thd.png"><br>Where <i>Vmrs<sub>i</sub></i> are the harmonic peak values.<br></li>
<li><b>SINAD:</b> Signal to noise and distortion, S/(N + D).<br>
<img src="images/spectrum.measure.sinad.png"><br>Where <i>Vmrs<sub>i</sub></i> are all BINs except peak signal and DC, also excluding bins in the descending slopes of these.</li>
<li><b>ENOB:</b> Effective number of bits.<br>
<img src="images/spectrum.measure.enob.png"><br></li>
</ul>
<p>&nbsp;</p>

<h3>Harmonics</h3>
<ul>
<li><b>FF:</b> Fundamental frequency and magnitude.</li>
<li><b>Nth:</b> Harmonics frequency and magnitude value relative to fundamental frequency. The maximum number of harmonics can be configured in the Measurement options.</li>
</ul>
<p>&nbsp;</p>


<h3><a name="spectrum.view.components" id="spectrum.view.components"></a>
5.4. Components</h3>
<p>The components view shows the spectral component list for the chosen trace ordered by magnitude. The count parameter sets the number of component to list.</p>
<p>The options contain:<br>
<li><b>Include DC</b>: Check to include the DC component in the search operations.</li>
<li><b>Peaks</b>: Specifies the number of peaks to list.</li>
<li><b>Excursion</b>: Adjusts the minimum peak excursion.</li>
<li><b>Threshold</b>: Adjusts the minimum amplitude for a peak to be considered.</li>
</ul>
</p>
<p><img src="images/spectrum.view.components.png"></p>
<p>&nbsp;</p>


<h3><a name="spectrum.view.cursors" id="spectrum.view.cursors"></a>
5.5. Cursors</h3>
<p>See <a href="#spectrum.cursors">Cursors</a>.</p>
<p>&nbsp;</p>

<h3><a name="spectrum.view.markers" id="spectrum.view.markers"></a>
5.6. Markers</h3>
<p>Markers are used to measure the amplitude, to indicate certain places on the sweep, such as band or channel limits. Using delta markers, you can make measurements that deal with power change with frequency or time.</p>
<img src="images/spectrum.view.markers.png"><br>
<p>&nbsp;</p>
<p>The menu of the markers view consists of:</p>
<ul>
<li><strong>Normal</strong>: Adds a new marker.</li>
<li><strong>Delta</strong>: Adds a new delta marker. The reference for a delta marker can be selected in the Ref column.</li>
<li><strong>Fixed</strong>: Adds a new fixed marker. A normal marker can be made fixed by selecting Fixed option in Trace column.</li>
<li><strong>Clear</strong>: Removes all markers from this list. Markers can be also removed using the button in the last column.<br>
Search button places the marker to:</li>
<li><strong>Peak</strong>: The maximum amplitude.</li>
<li><strong>Min</strong>: The minimum amplitude.</li>
<li><strong>Higher</strong>: The peak higher than the current amplitude position.</li>
<li><strong>Lower</strong>: The peak lower than the current amplitude  position.</li>
<li><strong>Left</strong>: Next peak to the left of the current frequency position.</li>
<li><strong>Right</strong>: Next peak to the right of the current frequency position.<br>
Settings:</li>
<li><strong>Search in visible range</strong>: When checked the previous search options operate in the visible frequency range.</li>
<li>The following options are shared with <a href="#spectrum.view.components">Components</a> options.</li>
</ul>

<p>&nbsp;</p>

<h2><a name="spectrum.export" id="spectrum.export"></a>
6. Export</h2>
<p>See <a href="main.html#main.export">Export</a> in Common Interfaces.</p>
	
<br><br><br><br><br><br><br><br><br><br>

</body>
</html>
